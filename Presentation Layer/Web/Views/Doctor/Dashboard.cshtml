@model Web.Models.ViewModels.DoctorVM.DashboardViewModel
@{
	Layout = "~/Views/Shared/_LayoutDoctor.cshtml";
	ViewData["Title"] = "Dashboard";
}
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">
<style>
	.calendar-wrapper {
		max-width: 320px;
		margin: auto;
	}

	.flatpickr-calendar.inline {
		border: none;
		box-shadow: none;
	}

	.flatpickr-day.today {
		border: none;
		background: #f1f1f1;
		color: #000;
		border-radius: 6px;
	}

	/* Día seleccionado */
	.flatpickr-day.selected,
	.flatpickr-day.startRange,
	.flatpickr-day.endRange {
		background: #000 !important;
		color: #fff !important;
		border-radius: 6px;
		border: none;
	}

	/* Mejora hover */
	.flatpickr-day:hover {
		background: #f0f0f0;
		border-radius: 6px;
	}

	/* Eliminar bordes molestos */
	.flatpickr-day {
		border: none;
		margin: 2px;
		line-height: 32px;
		height: 36px;
		width: 36px;
	}
</style>

<div class="container-xl mt-3">
	<div class="mb-4">
		<h1 class="h3 fw-bold text-dark mb-2">Bienvenido de nuevo, @Model.FullName</h1>
		<p class="text-muted">Esto es lo que está sucediendo hoy con sus pacientes</p>
	</div>
	<div class="row g-4 mb-4">
		<div class="col-12 col-md-6 col-lg-3">
			<div class="card text-white shadow border-0" style="background: linear-gradient(to right, #3b82f6, #2563eb); border-radius: 1rem;">
				<div class="card-body d-flex justify-content-between align-items-center">
					<div>
						<p class="text-light small mb-1">Citas de hoy</p>
						<h3 class="fw-bold mb-0">@Model.CountInfo.AppointmentsToday</h3>
					</div>
					<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
						 stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
						 class="lucide lucide-calendar w-10 h-10 text-blue-200 scale-2 me-2" aria-hidden="true">
						<path d="M8 2v4"></path>
						<path d="M16 2v4"></path>
						<rect width="18" height="18" x="3" y="4" rx="2"></rect>
						<path d="M3 10h18"></path>
					</svg>
				</div>
			</div>
		</div>
		<div class="col-12 col-md-6 col-lg-3">
			<div class="card text-white shadow border-0" style="background: linear-gradient(to right, #22c55e, #16a34a); border-radius: 1rem;">
				<div class="card-body d-flex justify-content-between align-items-center">
					<div>
						<p class="text-light small mb-1">Total de pacientes</p>
						<h3 class="fw-bold mb-0">@Model.CountInfo.TotalPatients</h3>
					</div>
					<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
						 stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
						 class="lucide lucide-users w-10 h-10 text-green-200 scale-2 me-2" aria-hidden="true">
						<path d="M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"></path>
						<path d="M16 3.128a4 4 0 0 1 0 7.744"></path>
						<path d="M22 21v-2a4 4 0 0 0-3-3.87"></path>
						<circle cx="9" cy="7" r="4"></circle>
					</svg>
				</div>
			</div>
		</div>
		<div class="col-12 col-md-6 col-lg-3">
			<div class="card text-white shadow border-0" style="background: linear-gradient(to right, #7e22ce, #6b21a8); border-radius: 1rem;">
				<div class="card-body d-flex justify-content-between align-items-center">
					<div>
						<p class="text-light small mb-1">Próximas citas</p>
						<h3 class="card-title mb-0">@Model.CountInfo.UpcomingAppointments</h3>
					</div>
					<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
						 stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
						 class="lucide lucide-clock w-10 h-10 text-purple-200 scale-2 me-2" aria-hidden="true">
						<circle cx="12" cy="12" r="10"></circle>
						<polyline points="12 6 12 12 16 14"></polyline>
					</svg>
				</div>
			</div>
		</div>
		<div class="col-12 col-md-6 col-lg-3">
			<div class="card text-white shadow border-0" style="background: linear-gradient(to right, #f97316, #ea580c); border-radius: 1rem;">
				<div class="card-body d-flex justify-content-between align-items-center">
					<div>
						<p class="text-light small mb-1">Citas completadas</p>
						<h3 class="card-title mb-0 fw-bold">@Model.CountInfo.CompletedAppointments</h3>
					</div>
					<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
						 stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
						 class="lucide lucide-trending-up w-10 h-10 text-orange-200 scale-2 me-2" aria-hidden="true">
						<polyline points="22 7 13.5 15.5 8.5 10.5 2 17"></polyline>
						<polyline points="16 7 22 7 22 13"></polyline>
					</svg>
				</div>
			</div>
		</div>
	</div>
	<div class="row">
		<div class="col-md-4 mb-4">
			<div class="card shadow-sm">
				<div class="card-body">
					<h5 class="card-title d-flex align-items-center text-primary mb-3">
						<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
							 stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
							 class="lucide lucide-calendar w-5 h-5 mr-2 text-blue-600" aria-hidden="true">
							<path d="M8 2v4"></path>
							<path d="M16 2v4"></path>
							<rect width="18" height="18" x="3" y="4" rx="2"></rect>
							<path d="M3 10h18"></path>
						</svg>
						<span class="text-black ms-3">Calendario</span>
					</h5>
					<div id="myCalendarContainer"></div>
				</div>
				<div class="bg-light rounded m-3 p-3 border-5">
					<p class="mb-0 text-muted fw-semibold">fecha escogida</p>
					<p class="mb-0 text-muted">0 citas</p>
				</div>
			</div>
		</div>

		<div class="col-md-8">
			<div class="card shadow rounded-xl p-4">
				<div class="d-flex justify-content-between align-items-center mb-4">
					<h5 class="card-title d-flex align-items-center mb-0 text-primary">
						<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
							 stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
							 class="lucide lucide-stethoscope w-5 h-5 mr-2 text-blue-600" aria-hidden="true">
							<path d="M11 2v2"></path>
							<path d="M5 2v2"></path>
							<path d="M5 3H4a2 2 0 0 0-2 2v4a6 6 0 0 0 12 0V5a2 2 0 0 0-2-2h-1"></path>
							<path d="M8 15a6 6 0 0 0 12 0v-3"></path>
							<circle cx="20" cy="10" r="2"></circle>
						</svg>
						<span class="text-black ms-2">Citas para el jue 2 oct 2025</span>
					</h5>
					<span class="badge bg-light text-dark" id="countLeft">0 citas</span>
				</div>

				<div id="appointmentsContainer">
				</div>

			</div>
		</div>
	</div>
	<div class="mt-2 mb-5">
		<div class="card shadow rounded-4 p-4">
			<h5 class="card-title text-primary mb-4">
				<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="me-2 align-text-bottom">
					<path d="M8 2v4" />
					<path d="M16 2v4" />
					<rect width="18" height="18" x="3" y="4" rx="2" />
					<path d="M3 10h18" />
				</svg>
				<span class="text-black">Resumen de citas - Últimos 7 días</span>
			</h5>			
			<canvas id="appointmentsChart" height="300"></canvas>
		</div>
	</div>

</div>

<script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
<script src="https://cdn.jsdelivr.net/npm/flatpickr/dist/l10n/es.js"></script>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script src="~/js/DashboardDoctor.js" asp-append-version="true"></script>
